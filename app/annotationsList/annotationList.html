<div  class="container_12" cg-busy="resultsPromise" ng-controller="AnnotationListCtrl">
<!-- Buttons -->
<p class="buttons-under-tabs">
  <button class="btn quickgo-btn icon-functional" ng-click="download()" data-icon="=">Download</button>
  <span class="pagination-text"><strong>{{totalItems}}</strong> annotations</strong></span>
</p>

<!-- Results -->
<div>
<!-- Results Header-->
<table id="assignedByCount" class="two-colours">
<tr>
  <thead>
    <th ng-repeat="colHeading in annotationColumns" ng-show="colHeading.slimCol == false || (colHeading.slimCol == true && showSlimColumns)">
      <span uib-tooltip-template="'{{colHeading.name}}.html'">
        {{colHeading.value}}</span>
    </th>
  </thead>
</tr>

  <!-- Results Repeat -->
  <tr ng-repeat="goTuple in row = (goList.annotationsList)"
  ng-class="{'duplicate-slim-top' : row[$index].id === row[$index +1].id ,'duplicate-slim-bottom' : row[$index].id === row[$index -1].id}"
  ng-if="row[$index].id != row[$index -1].id">

    <!-- <td>{{bingo[$index].id}}</td>
    <td>{{bingo[$index +1].id}}</td> -->
    <!-- <td ng-show="bingo[$index].id === bingo[$index +1].id">Found a REPEAT</td>
    <td ng-show="bingo[$index].id === bingo[$index -1].id">Found a REPEAT</td> -->

    <td><span ng-hide="row[$index].id === row[$index -1].id">{{goTuple.database}}</span></td>
    <td><span ng-hide="row[$index].id === row[$index -1].id"><a ng-click="followLinkToEntry(goTuple.database, goTuple.geneProductId)" target="_blank">{{goTuple.geneProductId}}</span></a></td>
    <td><span ng-hide="row[$index].id === row[$index -1].id">{{goTuple.symbol}}</span></td>
    <td><span ng-hide="row[$index].id === row[$index -1].id">{{goTuple.qualifier}}</span></td>

    <!-- GO Identifier-->
    <td class="text-nowrap">
      <table class="no-table-styling">
        <tr>
          <td>
            <a href="term/{{searchResult.id}}">{{searchResult.id}}</a>
            <a class="quickgo-link selectable" href="term/{{goTuple.goId}}">{{goTuple.goId}}</a>
            <basket-button termid="{{goTuple.goId}}" icondisabled="{{goTuple.isObsolete}}"></basket-button>
            <chart-icon term-id="goTuple.goId" term-name="goTuple.termName"></chart-icon>
          </td>
        </tr>


        <tr ng-if="row[$index].id === row[$index +1].id" class="repeated-slim-section">
          <td>
            <a href="term/{{searchResult.id}}">{{searchResult.id}}</a>
            <a class="quickgo-link selectable" href="term/{{goTuple.goId}}">{{row[$index +1].goId}}</a>
            <basket-button termid="{{row[$index +1].goId}}" icondisabled="{{row[$index +1].isObsolete}}"></basket-button>
            <chart-icon term-id="row[$index +1].goId" term-name="row[$index +1].termName"></chart-icon>
          </td>
        </tr>



    </table>
    </td>
    <!-- GO Term Name-->
    <td>
      <table class="no-table-styling">
        <tr>
          <td>
            <element uib-tooltip="{{goTuple.termName}}">{{goTuple.termName | shortenStringFilter}}</element>
          </td>
        </tr>
        <tr ng-if="row[$index].id === row[$index +1].id" class="repeated-slim-section">
          <td>


              <element uib-tooltip="{{row[$index +1].termName}}">{{row[$index +1].termName | shortenStringFilter}}</element>

        </td>
      </tr>
    </table>
    </td>

    <td ng-show="showSlimColumns"><span ng-hide="row[$index].id === row[$index -1].id"><a href="term/{{goTuple.originalTermId}}">{{goTuple.originalTermId}}</a></span></td>
    <td ng-show="showSlimColumns"><span ng-hide="row[$index].id === row[$index -1].id">{{goTuple.originalTermName}}</span></td>

    <!-- Aspect-->
    <td><span ng-hide="row[$index].id === row[$index -1].id">{{goTuple.aspect}}</span></td>

    <!-- Evidence: ECO:0000256  (IEA) -->
    <td><span ng-hide="row[$index].id === row[$index -1].id">

      <a class="quickgo-link selectable" href="/term/{{goTuple.evidenceEco}}">{{goTuple.evidenceEco}}</a>

      <a class="quickgo-icon selectable" ng-click="showEvidenceCodeOntologyGraph(goTuple.evidenceEco)">
        <span class="icon icon-functional quickgo-btn chart-btn selectable icon-inline-table" data-icon="h"></span></a>

        <a class="quickgo-link" href="http://geneontology.org/page/guide-go-evidence-codes#{{goTuple.evidenceGo | lowercase}}" target="_blank">({{goTuple.evidenceGo}})</a>
      </span></td>

      <!-- Reference eg "GO_REF:0000002" -->
      <td><span ng-hide="row[$index].id === row[$index -1].id"><a class="quickgo-link"
       ng-href="{{goTuple.reference | referenceUrlFilter}}" target="_blank">{{goTuple.reference}}</a></span></td>

     <!-- With -->

     <td><span ng-hide="row[$index].id === row[$index -1].id"><a class="quickgo-link ellipsis" ng-click="showWithList(goTuple.withList)" >{{goTuple.fullWith}}</a></span></td>

     <!-- Taxon-->
     <td><span ng-hide="row[$index].id === row[$index -1].id"><a class="quickgo-link selectable" ng-click="showTaxon(goTuple.taxon)">{{goTuple.taxon}}</a></span></td>

     <!-- Assigned By-->
     <td><span ng-hide="row[$index].id === row[$index -1].id"><a class="quickgo-link selectable" ng-click="followLinkToGeneric(goTuple.assignedBy)">{{goTuple.assignedBy}}</a></span></td>
     <td><span ng-hide="row[$index].id === row[$index -1].id">{{goTuple.fullExtension}}</span></td>

   </tr>
 </table>
 <uib-pagination total-items="goList.numberAnnotations" max-size="5" rotate="false" ng-model="currentPage" items-per-page="maxSize" ng-change="pageChanged()"></uib-pagination>


 <!-- if there are no results tell the user explicitly -->
  <div ng-show="goList.numberAnnotations==0">
    <h5>No matching annotations have been found</h5>
  </div>
</div>

<div class="clearfix"></div>

<!-- Dynamicaly inserted tootltips for column headings -->
<script type="text/ng-template" id="colDatabase.html"><span>The souce database of the annotation</span></script>
<script type="text/ng-template" id="colGeneProductID.html"><span>The sequence IDs that have been annotated with GO Terms.</span></script>
<script type="text/ng-template" id="colSymbol.html"><span>The symbols corresponding to the Gene Product ID. An officially approved gene symbol when available or other gene symbols or locus names.</span></script>
<script type="text/ng-template" id="colQualifier.html"><span>Defines the relationship between Gene product and GO term.</span></script>
<script type="text/ng-template" id="colGOIdentifier.html"><span>The unique, stable identifier of the GO term.</span></script>
<script type="text/ng-template" id="colGOTermName.html"><span>The GO term name corresponding to the GO Identifier.</span></script>
<script type="text/ng-template" id="colAspect.html"><span>The single letter initial of the ontology to which the GO term belongs. One of either F (Molecular Function), P (Biological Process) or C (Cellular Component).</span></script>
<script type="text/ng-template" id="colEvidence.html"><span>GO terms are assigned to proteins based on different evidence. This is represented by an evidence code.</span></script>
<script type="text/ng-template" id="colReference.html"><span>A PubMed reference or a GO_REF identifier which contains either the data supporting the annotation or details of the electronic method applied to generate the annotation.</span></script>
<script type="text/ng-template" id="colWith.html"><span>An additional ID to support annotations using certain evidence codes (including IEA, IPI, IGI, IC and ISS evidences). E.g. UniProtKB:O00341, InterPro:IPROO1878 â€¦</span></script>
<script type="text/ng-template" id="colTaxon.html"><span>The taxonomic ID for the species being annotated.</span></script>
<script type="text/ng-template" id="colAssignedBy.html"><span>The database which created the annotation. The GO annotation may not be copied without acknowledgement of the data source.</span></script>
<script type="text/ng-template" id="colAnnotationExtension.html"><span>Annotation Extension</span></script>
<script type="text/ng-template" id="colOrigID.html"><span>The orginal GO ID</span></script>
<script type="text/ng-template" id="colOrigName.html"><span>Original name of the slim</span></script>
